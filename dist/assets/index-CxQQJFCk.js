(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();const y=document.getElementById("estimate_pdf"),d=document.getElementById("estimate_pdf_error");y&&d&&y.addEventListener("change",function(){d.textContent="";const e=this.files[0];e&&(e.type!=="application/pdf"?(d.textContent="Only PDF files are allowed.",this.value=""):e.size>5*1024*1024&&(d.textContent="File size must be 5MB or less.",this.value=""))});document.getElementById("zip").addEventListener("blur",async function(){const e=this.value.trim(),t=document.getElementById("city"),o=document.getElementById("state");let s=document.createElement("span");if(s.className="spinner",this.parentNode.appendChild(s),e.length===5&&/^\d{5}$/.test(e))try{const i=await fetch(`https://api.zippopotam.us/us/${e}`);if(i.ok){const n=await i.json();n.places&&n.places.length>0?(t.value=n.places[0]["place name"],o.value=n.places[0]["state abbreviation"]):(t.value="",o.value="")}else t.value="",o.value=""}catch{t.value="",o.value=""}else t.value="",o.value="";s&&s.parentNode&&s.parentNode.removeChild(s)});const h=document.getElementById("vehicle_entry"),g=document.getElementById("vin-group"),E=document.getElementById("ymm-group"),p=document.getElementById("vehicle_vin"),L=document.getElementById("decode_vin_btn"),q=document.getElementById("vin-decode-status"),I=document.getElementById("vehicle_year"),v=document.getElementById("vehicle_make_select"),a=document.getElementById("vehicle_make_input"),b=document.getElementById("vehicle_model");function _(){g.style.display="",E.style.display="none",p.required=!0,I.required=!1,v.required=!1,b.required=!1}function B(){g.style.display="none",E.style.display="",p.required=!1,I.required=!0,v.required=!0,b.required=!0}h.addEventListener("change",function(){this.value==="vin"?_():B()});async function N(e){const t=document.getElementById("vin-info");t.innerHTML='Decoding VIN... <span class="spinner"></span>';try{const s=await(await fetch(`https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVin/${e}?format=json`)).json();if(s.Results&&s.Results.length>0){const i={Make:"Make",Model:"Model",Year:"Model Year",Trim:"Trim","Transmission Style":"Transmission Style","Transmission Speeds":"Transmission Speeds","Drive Type":"Drive Type","Engine Number of Cylinders":"Engine Number of Cylinders","Engine Displacement (L)":"Displacement (L)","Fuel Type":"Fuel Type - Primary"};let n="<strong>Decoded VIN Information:</strong><ul>";for(const[l,m]of Object.entries(i)){const u=s.Results.find(f=>f.Variable===m&&f.Value&&f.Value!=="Not Applicable");u&&(n+=`<li><strong>${l}:</strong> ${u.Value}</li>`)}n+="</ul>",t.innerHTML=n}else t.innerHTML="No results found for this VIN."}catch{t.innerHTML="Error decoding VIN."}}L.addEventListener("click",function(){const e=p.value.trim();if(!e||e.length<11){q.textContent="Please enter a valid VIN (at least 11 characters).";return}N(e)});h.value==="vin"?_():B();v.addEventListener("change",function(){this.value==="Other"?(a.style.display="block",a.required=!0):(a.style.display="none",a.required=!1,a.value="")});document.getElementById("appraisal-form").addEventListener("submit",async function(e){const t=this;this.preventDefault();const o=t.querySelector('button[type="submit"]');o&&(o.disabled=!0);const s=t.querySelector('input[name="estimate"][value="yes"]'),i=document.getElementById("estimate_pdf"),n=document.getElementById("estimate_pdf_error");if(s&&s.checked)if(!i.files||!i.files[0]){n&&(n.textContent="Please upload a PDF damage estimate."),o&&(o.disabled=!1),i.focus();return}else n&&(n.textContent="");else n&&(n.textContent="");t.vehicle_make.value==="Other"?t.vehicle_make_other.value:t.vehicle_make.value;let m=t.owner.value==="yes"&&t.insured.value==="yes"?"The form has been submitted and is now under review. Please note that we may contact you for additional information regarding your case. We appreciate your patience while your case is under review.":"Based on your answers, you may not qualify for a diminished value claim. If you have questions, please contact support.";const u=document.getElementById("result");u.textContent=m,o&&(o.disabled=!1)});const c=document.querySelector('input[name="phone"]');c&&c.addEventListener("input",function(){let e=c.value.replace(/\D/g,"");e.length>3&&e.length<=6?c.value=`(${e.slice(0,3)}) ${e.slice(3)}`:e.length>6&&(c.value=`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`)});const r=document.querySelector('input[name="vehicle_vin"]');r&&r.addEventListener("input",function(){r.value=r.value.toUpperCase()});document.querySelectorAll("input,select").forEach(e=>{e.addEventListener("focus",function(){let t="";switch(e.name){case"vehicle_vin":t="Enter the 17-character VIN from your vehicle or insurance documents.";break;case"phone":t="Enter a valid mobile number for contact.";break;case"zip_code":t="Enter your 5-digit ZIP code.";break;case"vehicle_year":t="Enter the 4-digit year of your vehicle.";break;case"vehicle_make":t="Select or type your vehicle make.";break;case"vehicle_model":t="Enter your vehicle model.";break}t&&(e.title=t)})});r&&r.addEventListener("blur",function(){const e=r.value.trim();e.length>=11&&e.startsWith("1")&&(document.getElementById("vin-decode-status").textContent+=" (AI: This is likely a US-made vehicle)")});
